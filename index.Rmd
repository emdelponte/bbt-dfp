---
title: "Biblioteca Setorial Fitopatologia UFV"
output: 
  flexdashboard::flex_dashboard:
    theme: yeti
    logo: icon-bbt.png
    css: style.css
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(readxl)
library(tidyverse)
library(crosstalk)
library(plotly)
library(viridis)
library(DT)
Sys.setlocale("LC_ALL", 'pt_BR.UTF-8')
bbt <- read_excel("acervo-bbt-dfp.xlsx")
bbt <- select(bbt, -1)
bbt <- arrange(bbt, codigo)
```




Column {data-width=300}
-----------------------------------------------------------------------

### Apresentação 

Bem-vindo à interface de consulta aos **livros** do acervo da Biblioteca Setorial do Departamento de Fitopatologia da Universidade Federal de Viçosa. A tabela está ordenada quanto ao número de catalogação. Clique em cima do nome de qualquer coluna para alterar a ordenação. Entre qualquer termo no campo de busca para aplicar os filtros. Use "backspace" para limpar a busca e realizar nova consulta. A lista pode ser obtida no formato PDF ou planilha eletrônica.
 
Número de livros: `r nrow(bbt)`<br>
Última atualização: `r format(Sys.Date(), "%d %b %Y")`



### Número de livros por ano de publicação

```{r}
bbt %>% 
  plot_ly(x = ~ano, 
         colors = viridis_pal(option = "D")(3)) %>% 
  layout(barmode = 'stack',
         margin=list(l=60,r=30,t=40,b=40))

```



Column {data-width=750}
-----------------------------------------------------------------------

### Tabela de livros do acervo


```{r}
datatable(bbt, 
          extensions = c('Buttons', 'ColReorder'),
          escape = TRUE,
          rownames = FALSE, 
          colnames = c('Num. de catalogação', 'Título', 'Autor', 'Volume', 'Ano', 'N. de exemplares', 'Edição'), 
         class = 'cell-border stripe',
                      options=list(dom = 'Bfrtip',buttons = c( 'excel', 'pdf'), deferRender=TRUE, 
                          scrollY=500, 
                          scroller=TRUE,
                          colReorder = F,
                         
  pageLength = 100,
    fontSize = 8,
  lengthMenu = c(100, 250, 500))) %>% 
 formatStyle(
  c('codigo', 'titulo', 'autor', 'volume', 'ano', 'qtdade', 'edicao'),
  fontSize = '125%')
```



