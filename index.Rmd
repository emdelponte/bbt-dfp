---
title: "SISBBT Fitopatologia"
output: 
  flexdashboard::flex_dashboard:
    theme: yeti
    css: style.css
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(readxl)
library(tidyverse)
library(crosstalk)
library(plotly)
library(viridis)
library(DT)
Sys.setlocale("LC_ALL", 'pt_BR.UTF-8')
bbt <- read_excel("acervo-bbt-dfp.xlsx")
bbt <- arrange(bbt, -ano)
```




Column {data-width=300}
-----------------------------------------------------------------------

### Apresentação 

SISBBT é uma interface de consulta aos **livros** do acervo Biblioteca Setorial do Departamento de Fitopatologia da Universidade Federal de Viçosa. A tabela ao lado está ordenada pelo ano mais recente de publicação. Para utilizar, insira o termo a consultar no campo de busca livre acima da tabela. Use "backspace" para limpar o campo de busca.
 

Número de livros: `r nrow(bbt)`

Última atualização: `r Sys.Date()`


### Títulos por ano

```{r}
bbt %>% 
  plot_ly(x = ~ano, 
         colors = viridis_pal(option = "D")(3)) %>% 
  layout(barmode = 'stack',
         margin=list(l=60,r=30,t=40,b=40))

```



Column {data-width=750}
-----------------------------------------------------------------------

### Livros no acervo


```{r}
datatable(bbt, 
          extensions = c('Buttons', 'ColReorder'),
          escape = TRUE,
          rownames = FALSE, 
          colnames = c('Catalogação', 'Título', 'Autor', 'Volume', 'Ano', 'N. de exemplares', 'Edição'), 
         class = 'cell-border stripe',
                      options=list(dom = 'Bfrtip',buttons = c( 'excel', 'pdf'), deferRender=TRUE, 
                          scrollY=500, 
                          scroller=TRUE,
                          colReorder = F,
                         
  pageLength = 100,
    fontSize = 8,
  lengthMenu = c(100, 250, 500))) %>% 
 formatStyle(
  c('codigo', 'titulo', 'autor', 'volume', 'ano', 'qtdade', 'edicao'),
  fontSize = '120%')
```



