---
title: "SISBBT Fitopatologia"
output: 
  flexdashboard::flex_dashboard:
    theme: yeti
    css: style.css
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(readxl)
library(tidyverse)
library(crosstalk)
library(plotly)
library(viridis)
library(DT)
```

Column {data-width=750}
-----------------------------------------------------------------------

### Livros no acervo

```{r, include=FALSE}
Sys.setlocale("LC_ALL", 'pt_BR.UTF-8')
bbt <- read_excel("acervo-bbt-dfp.xlsx")
bbt <- arrange(bbt, -ano)
```

```{r}
datatable(bbt, 
          extensions = c('Buttons', 'ColReorder'),
          escape = TRUE,
          rownames = FALSE, 
          colnames = c('Catalogação', 'Título', 'Autor', 'Volume', 'Ano', 'N. de exemplares', 'Edição'), 
         class = 'cell-border stripe',
                      options=list(dom = 'Bfrtip',buttons = c( 'excel', 'pdf'), deferRender=TRUE, 
                          scrollY=500, 
                          scroller=TRUE,
                          colReorder = F,
                         
  pageLength = 100,
    fontSize = 8,
  lengthMenu = c(100, 250, 500))) %>% 
 formatStyle(
  c('codigo', 'titulo', 'autor', 'volume', 'ano', 'qtdade', 'edicao'),
  fontSize = '120%')
```


Column {data-width=350}
-----------------------------------------------------------------------

### Apresentação 


SISBBT é uma interface de consulta aos **livros** do acervo Biblioteca Setorial do Departamento de Fitopatologia da Universidade Federal de Viçosa. Para consultar, escreva o termo a consultar no campo de busca livre acima da tabela. A tabela ao lado está ordenada pelo ano mais recente de publicação. 

Número de livros: `r nrow(bbt)`

Última atualização: `r Sys.Date()`

### Títulos por ano

```{r}
g1 <- bbt %>% 
  ggplot(aes(ano))+
  geom_bar(fill = "steelblue")+
  theme_minimal()+
  labs(y ="Número")

(gg <- ggplotly(g1))

```

